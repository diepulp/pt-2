Phase 6 Wave 3 Documentation Ready kickoff October 14 2025

Start 30 Wave 3 Kickoff Complete execution plan Executive summary objectives API contracts Track breakdown 16 quality gates Timeline execution strategy Wave 3 priorities Wave 2 Completion Signoff Understand Schema (6 audit columns 2 indexes Infrastructure libraries Server actions Direct service invocation quality gates API contracts handoff APIs infrastructure Wave 2 Simplified Workflow Architecture decisions patterns ADR-001 justification invocation Saga recovery pattern Idempotency strategy Extension path event bus Read ยง9 Re-Introduce Deferred Components features

Planning Checklists Developer Checklist task breakdown acceptance criteria Wave 0-2 Wave 3 477 Integration Testing RatingSlip MTL E2E Testing Quality gates (31 Parallel execution strategy Wave 3 checklist Implementation Plan v3 phase overview Wave 1-2 Wave 3 deliverables Testing monitoring strategy Definition done Phase 6 context

Technical Reference implementation Loyalty Service API/index interface Calculation logic Database operations Read operations Loyalty service capabilities `calculatePoints() calculation `accruePoints() workflow `createLedgerEntry() ledger writes Type definitions DTOs Reference integration tests UI code 7. Server Actions 2 Deliverables/actions/ratingslip-actions (456/loyalty-actions (293 LOC Wave 3 testing RatingSlip Actions Import integration tests UI components Infrastructure Libraries/correlation correlation tracking/idempotency Deterministic key generation/rate-limiter 10 req/min enforcement/telemetry/emitLOC Structured logging infrastructure Wave 3 Correlation Promise getCorrelationId Idempotency checkRateLimit Promise<RateLimitResult Telemetry void server actions features Database Schema/migrations/20251013233420_wave_2_schema_hardening.sql loyalty_ledger schema `loyalty_ledger 17 columns (11 base 6 audit staff_id balance/after correlation_id Indexes_loyalty balance tracking_tier Tier multipliers increment_player_loyalty_id RETURNS TABLE (11 columns before/after snapshots database queries tests

Testing Patterns Track 0 Test Suites/loyalty (22/22 (13/16 (12/12 (9/9 (13/13-limiter-actions (7/7 Wave 3 Mock Supabase client() ServiceResult validation Idempotency verification Error handling Edge case coverage Follow patterns integration tests Phase 4-5 E2E Test Examples-management-integration (22-management (26 Create workflow (5 Read (4-7 Update Delete (3 Complete lifecycle Performance benchmarks (2 Adapt patterns RatingSlip Loyalty E2E tests

Architecture Standards PT-2 Standards.md Coding standards enforcement Functional factories classes interfaces `ReturnType No global singletons Single source types No casting Review before code Service Layer Architecture design patterns ServiceResult Error handling Operation wrapper Separation concerns Follow new services Service Responsibility Matrix context integrity Domain ownership rules Cross-service communication Data flow diagrams Verify MTL violate Loyalty boundaries-only State Management Strategy-003 React Query cache management Query patterns Cache invalidation strategies usage boundaries Mutation patterns MTL hooks mutations Balanced Architecture ReferenceHORIZONTAL VERTICAL decision framework Hybrid pattern guidance Wave efficiency metrics scope decisions

Security Compliance Integrity Framework Automated guardrails enforcement Schema verification Type generation workflow Pre-commit hooks Migration naming standards modifying Migration Naming Standard_NAMING_STANDARD Timestamp migration naming_description.sql Wave 3 migrations

Progress Architecture Gaps MVP progress 70% MVP Phase 6 Waves 1-2 Service layer 100% Server 75% 101/101 quality gates Wave 3 MVP Production Roadmap timeline Phase 0-8 estimates Risk assessment

Wave 3 Start Integration Testing_3_KICKOFF Task 3.0.1 (8-test suite_2_COMPLETION Appendix C Source code review test suites_6_DEVELOPER_CHECKLIST Task 3.3.1 test patterns Permission Service Integration_3_KICKOFF Task 3.1.1-actions implementation_RESPONSIBILITY_MATRIX Permission boundaries Database schema_permissions table MTL UI Implementation_3_KICKOFF Tasks 3.2.1-3.2.3-003-state-management-strategy React Query patterns-management-integration UI test patterns 4 Architecture standards interfaces

File Paths Project Root /home/diepulp/projects/pt-2/ Wave 3 Docs WAVE_3_KICKOFF START WAVE_3_REFERENCES Wave 2-2/\_COMPLETION_SIGNOFF_2_SIMPLIFIED_WORKFLOW Planning PHASE_6_DEVELOPER_CHECKLIST_IMPLEMENTATION_PLAN_v3.md Source Code 2 app/actions ratingslip-actions (456 loyalty-actions (293 LOC services/loyalty index business crud queries correlation idempotency rate-limiter telemetry Tests services/loyalty lib (34 actions (7 4-5 examples Schema supabase/migrations 20251013233420_wave_2_schema_hardening.sql database.types Standardsstandards-prd SERVICE_LAYER_ARCHITECTURE_DIAGRAM CANONICAL_BLUEPRINT_MVP_PRD SERVICE_RESPONSIBILITY_MATRIX BALANCED_ARCHITECTURE_QUICK MIGRATION_NAMING_STANDARD-003-state-management-strategy_FRAMEWORK Progress ARCHITECTURE_GAPS MVP_PRODUCTION_ROADMAP

Pre-Implementation Checklist Wave 3 Read WAVE_3_KICKOFF (30 WAVE_2_COMPLETION_SIGNOFF (20 Review ratingslip-actions loyalty-actions test patterns Verify local environment Supabase instance Latest migrations Types Tests Create integration test file/ratingslip-loyalty.test Set parallel tracks Track 0 Integration Tests HIGH Track 1: Permission Service 2: MTL UI

Support Resources Architecture Decisions WAVE_2_SIMPLIFIED_WORKFLOW BALANCED_ARCHITECTURE Loyalty Service Tests Signoff WAVE_2_COMPLETION_SIGNOFF Testing Patterns Phase 4-5 Wave 2 tests PHASE_6_DEVELOPER_CHECKLIST Standards Compliance SERVICE_LAYER_ARCHITECTURE_DIAGRAM INTEGRITY_FRAMEWORK Ready Wave 3 Kickoff 2025-10-14 Wave 3 completion WAVE_3_KICKOFF
