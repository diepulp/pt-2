Phase 1 Security Skeleton Week security scaffolding JWT audit compliance core services 2. No gold-plating compliance engine guardrails Enable RLS ON tables deny-all baseline default user_id auth.uid JWT Postgres function_role StaffRole SUPERVISOR unused Phase 2. Audit table id action_id timestamp metadata trigger function Compliance Tables mtl_entry casino_settings RLS role matrices JWT expansion tiered audit triggers MTL thresholds reporting AML/CTR exports RLS ON owner read policy player JWT helper returns role audit_log mtl_entry casino_settings tables passes 2–3 days 1–2 engineers First” principle Avoids over-engineeringPhase 2 Player Visit Rating Slip slices no service code unsafe assumptions Phase 1 Security Skeleton Week baseline safety net security
